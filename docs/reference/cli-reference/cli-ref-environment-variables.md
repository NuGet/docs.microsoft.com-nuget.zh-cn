---
title: NuGet CLI 环境变量
description: nuget.exe 环境变量的参考
author: JonDouglas
ms.author: jodou
ms.date: 01/18/2018
ms.topic: reference
ms.openlocfilehash: a688382420633916e81a000ba6095ff83e036cf9
ms.sourcegitcommit: ee6c3f203648a5561c809db54ebeb1d0f0598b68
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/26/2021
ms.locfileid: "98779381"
---
# <a name="nuget-cli-environment-variables"></a><span data-ttu-id="491a2-103">NuGet CLI 环境变量</span><span class="sxs-lookup"><span data-stu-id="491a2-103">NuGet CLI environment variables</span></span>

<span data-ttu-id="491a2-104">可以通过多个环境变量来配置 nuget.exe CLI 的行为，这会影响计算机范围、用户或进程级别 nuget.exe。</span><span class="sxs-lookup"><span data-stu-id="491a2-104">The behavior of the nuget.exe CLI can be configured through a number of environment variables, which affect nuget.exe on computer-wide, user, or process levels.</span></span> <span data-ttu-id="491a2-105">环境变量始终覆盖文件中的任何设置 `NuGet.Config` ，允许生成服务器更改适当的设置，而无需修改任何文件。</span><span class="sxs-lookup"><span data-stu-id="491a2-105">Environment variables always override any settings in `NuGet.Config` files, allowing build servers to change appropriate settings without modifying any files.</span></span>

<span data-ttu-id="491a2-106">一般情况下，直接在命令行上或在 NuGet 配置文件中指定的选项优先，但有一些例外，如 *FORCE_NUGET_EXE_INTERACTIVE*。</span><span class="sxs-lookup"><span data-stu-id="491a2-106">In general, options specified directly on the command line or in NuGet configuration files have precedence, but there are a few exceptions such as *FORCE_NUGET_EXE_INTERACTIVE*.</span></span> <span data-ttu-id="491a2-107">如果发现 nuget.exe 在不同的计算机之间行为不同，则可能是环境变量。</span><span class="sxs-lookup"><span data-stu-id="491a2-107">If you find that nuget.exe behaves differently between different computers, an environment variable could be the cause.</span></span> <span data-ttu-id="491a2-108">例如，在部署期间使用的 Azure Web 应用 Kudu () *NUGET_XMLDOC_MODE* 设置为 " *跳过* " 以加快包还原性能并节省磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="491a2-108">For example, Azure Web Apps Kudu (used during deployment) has *NUGET_XMLDOC_MODE* set to *skip* to speed up package restore performance and save disk space.</span></span>

<span data-ttu-id="491a2-109">NuGet CLI 使用 MSBuild 读取项目文件。</span><span class="sxs-lookup"><span data-stu-id="491a2-109">The NuGet CLI uses MSBuild to read the project files.</span></span> <span data-ttu-id="491a2-110">在 MSBuild 计算期间，所有环境变量都作为 [属性](/visualstudio/msbuild/msbuild-command-line-reference) 提供。</span><span class="sxs-lookup"><span data-stu-id="491a2-110">All environment variables are available as [properties](/visualstudio/msbuild/msbuild-command-line-reference) during the MSBuild evaluation.</span></span>
<span data-ttu-id="491a2-111">[NuGet 包和还原为 MSBuild 目标](../msbuild-targets.md#restore-properties)中记录的属性列表也可以设置为环境变量。</span><span class="sxs-lookup"><span data-stu-id="491a2-111">The list of properties documented in [NuGet pack and restore as MSBuild targets](../msbuild-targets.md#restore-properties) can also be set as environment variables.</span></span>

| <span data-ttu-id="491a2-112">变量</span><span class="sxs-lookup"><span data-stu-id="491a2-112">Variable</span></span> | <span data-ttu-id="491a2-113">说明</span><span class="sxs-lookup"><span data-stu-id="491a2-113">Description</span></span> | <span data-ttu-id="491a2-114">备注</span><span class="sxs-lookup"><span data-stu-id="491a2-114">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="491a2-115">http_proxy</span><span class="sxs-lookup"><span data-stu-id="491a2-115">http_proxy</span></span> | <span data-ttu-id="491a2-116">用于 NuGet HTTP 操作的 Http 代理。</span><span class="sxs-lookup"><span data-stu-id="491a2-116">Http proxy used for NuGet HTTP operations.</span></span> | <span data-ttu-id="491a2-117">这将指定为 `http://<username>:<password>@proxy.com` 。</span><span class="sxs-lookup"><span data-stu-id="491a2-117">This would be specified as `http://<username>:<password>@proxy.com`.</span></span> |
| <span data-ttu-id="491a2-118">no_proxy</span><span class="sxs-lookup"><span data-stu-id="491a2-118">no_proxy</span></span> | <span data-ttu-id="491a2-119">将使用代理的域配置为绕过。</span><span class="sxs-lookup"><span data-stu-id="491a2-119">Configures domains to bypass from using proxy.</span></span> | <span data-ttu-id="491a2-120">指定为以逗号分隔的域 (，) 。</span><span class="sxs-lookup"><span data-stu-id="491a2-120">Specified as domains separated by comma (,).</span></span> |
| <span data-ttu-id="491a2-121">EnableNuGetPackageRestore</span><span class="sxs-lookup"><span data-stu-id="491a2-121">EnableNuGetPackageRestore</span></span> | <span data-ttu-id="491a2-122">如果 NuGet 在还原时需要此权限，NuGet 应隐式授予同意。</span><span class="sxs-lookup"><span data-stu-id="491a2-122">Flag for if NuGet should implicitly grant consent if that's required by package on restore.</span></span> | <span data-ttu-id="491a2-123">指定标志被视为 *true* 或 *1*，其他任何值视为标志未设置。</span><span class="sxs-lookup"><span data-stu-id="491a2-123">Specified flag is treated as *true* or *1*, any other value treated as flag not set.</span></span> |
| <span data-ttu-id="491a2-124">NUGET_EXE_NO_PROMPT</span><span class="sxs-lookup"><span data-stu-id="491a2-124">NUGET_EXE_NO_PROMPT</span></span> | <span data-ttu-id="491a2-125">阻止 exe 提示输入凭据。</span><span class="sxs-lookup"><span data-stu-id="491a2-125">Prevents the exe for prompting for credentials.</span></span> | <span data-ttu-id="491a2-126">Null 或空字符串以外的任何值都将被视为此标志设置/true。</span><span class="sxs-lookup"><span data-stu-id="491a2-126">Any value except null or empty string will be treated as this flag set/true.</span></span> |
| <span data-ttu-id="491a2-127">FORCE_NUGET_EXE_INTERACTIVE</span><span class="sxs-lookup"><span data-stu-id="491a2-127">FORCE_NUGET_EXE_INTERACTIVE</span></span> | <span data-ttu-id="491a2-128">强制交互模式的全局环境变量。</span><span class="sxs-lookup"><span data-stu-id="491a2-128">Global environment variable to force interactive mode.</span></span> | <span data-ttu-id="491a2-129">Null 或空字符串以外的任何值都将被视为此标志设置/true。</span><span class="sxs-lookup"><span data-stu-id="491a2-129">Any value except null or empty string will be treated as this flag set/true.</span></span> |
| <span data-ttu-id="491a2-130">NUGET_PACKAGES</span><span class="sxs-lookup"><span data-stu-id="491a2-130">NUGET_PACKAGES</span></span> | <span data-ttu-id="491a2-131">用于 *全局包* 文件夹的路径，如 [管理全局包和缓存文件夹](../../consume-packages/managing-the-global-packages-and-cache-folders.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="491a2-131">Path to use for the *global-packages* folder as described on [Managing the global packages and cache folders](../../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> | <span data-ttu-id="491a2-132">指定为绝对路径。</span><span class="sxs-lookup"><span data-stu-id="491a2-132">Specified as absolute path.</span></span> |
| <span data-ttu-id="491a2-133">NUGET_FALLBACK_PACKAGES</span><span class="sxs-lookup"><span data-stu-id="491a2-133">NUGET_FALLBACK_PACKAGES</span></span> | <span data-ttu-id="491a2-134">全局备用包文件夹。</span><span class="sxs-lookup"><span data-stu-id="491a2-134">Global fallback packages folders.</span></span> | <span data-ttu-id="491a2-135">用分号分隔的绝对文件夹路径 (; ) 。</span><span class="sxs-lookup"><span data-stu-id="491a2-135">Absolute folder paths separated by semicolon (;).</span></span> |
| <span data-ttu-id="491a2-136">NUGET_HTTP_CACHE_PATH</span><span class="sxs-lookup"><span data-stu-id="491a2-136">NUGET_HTTP_CACHE_PATH</span></span> | <span data-ttu-id="491a2-137">用于 *http 缓存* 文件夹的路径，如 [管理全局包和缓存文件夹](../../consume-packages/managing-the-global-packages-and-cache-folders.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="491a2-137">Path to use for the *http-cache* folder as described on [Managing the global packages and cache folders](../../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> | <span data-ttu-id="491a2-138">指定为绝对路径。</span><span class="sxs-lookup"><span data-stu-id="491a2-138">Specified as absolute path.</span></span> |
| <span data-ttu-id="491a2-139">NUGET_PERSIST_DG</span><span class="sxs-lookup"><span data-stu-id="491a2-139">NUGET_PERSIST_DG</span></span> | <span data-ttu-id="491a2-140">一个标志，用于指示是否应保留 (从 MSBuild) 收集的数据。</span><span class="sxs-lookup"><span data-stu-id="491a2-140">Flag indicating if dg files (data collected from MSBuild) should be persisted.</span></span> | <span data-ttu-id="491a2-141">指定为 " *true* " 或 " *false* " (默认) ，如果 NUGET_PERSIST_DG_PATH 未设置，则将存储到当前) 环境中的临时目录 (NuGetScratch 文件夹中。</span><span class="sxs-lookup"><span data-stu-id="491a2-141">Specified as *true* or *false* (default), if NUGET_PERSIST_DG_PATH not set will be stored to temporary directory (NuGetScratch folder in current environment temp directory).</span></span> |
| <span data-ttu-id="491a2-142">NUGET_PERSIST_DG_PATH</span><span class="sxs-lookup"><span data-stu-id="491a2-142">NUGET_PERSIST_DG_PATH</span></span> | <span data-ttu-id="491a2-143">持久保存 dg 文件的路径。</span><span class="sxs-lookup"><span data-stu-id="491a2-143">Path to persist dg files.</span></span> | <span data-ttu-id="491a2-144">指定为绝对路径，仅当 *NUGET_PERSIST_DG* 设置为 true 时才使用此选项。</span><span class="sxs-lookup"><span data-stu-id="491a2-144">Specified as absolute path, this option is only used when *NUGET_PERSIST_DG* is set to true.</span></span> |
| <span data-ttu-id="491a2-145">NUGET_RESTORE_MSBUILD_ARGS</span><span class="sxs-lookup"><span data-stu-id="491a2-145">NUGET_RESTORE_MSBUILD_ARGS</span></span> | <span data-ttu-id="491a2-146">设置其他 MSBuild 参数。</span><span class="sxs-lookup"><span data-stu-id="491a2-146">Sets additional MSBuild arguments.</span></span> | <span data-ttu-id="491a2-147">传递参数的方式与将其传递到 msbuild.exe 的方式相同。</span><span class="sxs-lookup"><span data-stu-id="491a2-147">Pass arguments identical to how you would pass them to msbuild.exe.</span></span> <span data-ttu-id="491a2-148">将项目属性 "Foo" 从命令行设置为值栏的示例如下所示： Foo = Bar</span><span class="sxs-lookup"><span data-stu-id="491a2-148">An example of setting a project property Foo from the command line to value Bar would be /p:Foo=Bar</span></span> |
| <span data-ttu-id="491a2-149">NUGET_RESTORE_MSBUILD_VERBOSITY</span><span class="sxs-lookup"><span data-stu-id="491a2-149">NUGET_RESTORE_MSBUILD_VERBOSITY</span></span> | <span data-ttu-id="491a2-150">设置 MSBuild 日志详细级别。</span><span class="sxs-lookup"><span data-stu-id="491a2-150">Sets the MSBuild log verbosity.</span></span> | <span data-ttu-id="491a2-151">默认值为 *quiet* ( "/v： q" ) 。</span><span class="sxs-lookup"><span data-stu-id="491a2-151">Default is *quiet* ("/v:q").</span></span> <span data-ttu-id="491a2-152">可能的值 *q [uiet]*、 *m [inimal]*、 *n [ormal]*、 *d [etailed]* 和 *诊断 [nostic]*。</span><span class="sxs-lookup"><span data-stu-id="491a2-152">Possible values *q[uiet]*, *m[inimal]*, *n[ormal]*, *d[etailed]*, and *diag[nostic]*.</span></span> |
| <span data-ttu-id="491a2-153">NUGET_SHOW_STACK</span><span class="sxs-lookup"><span data-stu-id="491a2-153">NUGET_SHOW_STACK</span></span> | <span data-ttu-id="491a2-154">确定是否应向用户显示 (包含 stack 跟踪) 的完整异常。</span><span class="sxs-lookup"><span data-stu-id="491a2-154">Determines whether the full exception (including stack trace) should be displayed to the user.</span></span> | <span data-ttu-id="491a2-155">指定为 *true* 或 *false* (默认) 。</span><span class="sxs-lookup"><span data-stu-id="491a2-155">Specified as *true* or *false* (default).</span></span> |
| <span data-ttu-id="491a2-156">NUGET_XMLDOC_MODE</span><span class="sxs-lookup"><span data-stu-id="491a2-156">NUGET_XMLDOC_MODE</span></span> | <span data-ttu-id="491a2-157">确定如何处理程序集 XML 文档文件提取。</span><span class="sxs-lookup"><span data-stu-id="491a2-157">Determines how assemblies XML documentation file extraction should be handled.</span></span> | <span data-ttu-id="491a2-158">支持的模式为 *skip* (不要提取 xml 文档文件) 、 *压缩* (将 xml 文档文件存储为 zip 存档) 或 *none* (默认情况下，将 xml 文档文件视为常规文件) 。</span><span class="sxs-lookup"><span data-stu-id="491a2-158">Supported modes are *skip* (do not extract XML documentation files), *compress* (store XML doc files as a zip archive) or *none* (default, treat XML doc files as regular files).</span></span> |
| <span data-ttu-id="491a2-159">NUGET_CERT_REVOCATION_MODE</span><span class="sxs-lookup"><span data-stu-id="491a2-159">NUGET_CERT_REVOCATION_MODE</span></span> | <span data-ttu-id="491a2-160">确定用于对包进行签名的证书的吊销状态检查如何在安装或还原已签名的包时执行。</span><span class="sxs-lookup"><span data-stu-id="491a2-160">Determines how the revocation status check of the certificate used to sign a package, is performed when a signed package is installed or restored.</span></span> <span data-ttu-id="491a2-161">如果未设置，则默认为 `online` 。</span><span class="sxs-lookup"><span data-stu-id="491a2-161">When not set, defaults to `online`.</span></span>| <span data-ttu-id="491a2-162">可能的值 *联机* (默认) *脱机*。</span><span class="sxs-lookup"><span data-stu-id="491a2-162">Possible values *online* (default), *offline*.</span></span>  <span data-ttu-id="491a2-163">与[NU3028](../errors-and-warnings/NU3028.md)相关</span><span class="sxs-lookup"><span data-stu-id="491a2-163">Related to [NU3028](../errors-and-warnings/NU3028.md)</span></span> |

