---
title: NuGet 2.7 发行说明
description: NuGet 2.7 的发行说明，包括已知问题、bug 修复、新增功能和 Dcr。
author: JonDouglas
ms.author: jodou
ms.date: 11/11/2016
ms.topic: conceptual
ms.openlocfilehash: 70600e3c563e357663b4a2f24139d2fc25f75fdf
ms.sourcegitcommit: ee6c3f203648a5561c809db54ebeb1d0f0598b68
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/26/2021
ms.locfileid: "98780389"
---
# <a name="nuget-27-release-notes"></a><span data-ttu-id="5e03b-103">NuGet 2.7 发行说明</span><span class="sxs-lookup"><span data-stu-id="5e03b-103">NuGet 2.7 Release Notes</span></span>

<span data-ttu-id="5e03b-104">[NuGet 2.6.1 For WebMatrix 发行说明](../release-notes/nuget-2.6.1-for-webmatrix.md)  | [NuGet 2.7.1 发行说明](../release-notes/nuget-2.7.1.md)</span><span class="sxs-lookup"><span data-stu-id="5e03b-104">[NuGet 2.6.1 for WebMatrix Release Notes](../release-notes/nuget-2.6.1-for-webmatrix.md) | [NuGet 2.7.1 Release Notes](../release-notes/nuget-2.7.1.md)</span></span>

<span data-ttu-id="5e03b-105">NuGet 2.7 于8月 22 2013 日发布。</span><span class="sxs-lookup"><span data-stu-id="5e03b-105">NuGet 2.7 was released on August 22, 2013.</span></span>

## <a name="acknowledgements"></a><span data-ttu-id="5e03b-106">致谢</span><span class="sxs-lookup"><span data-stu-id="5e03b-106">Acknowledgements</span></span>

<span data-ttu-id="5e03b-107">我们想感谢以下外部参与者对 NuGet 2.7 的重大贡献：</span><span class="sxs-lookup"><span data-stu-id="5e03b-107">We would like to thank the following external contributors for their significant contributions to NuGet 2.7:</span></span>

1. <span data-ttu-id="5e03b-108">[Mike Roth](http://www.codeplex.com/site/users/view/mxrss) ([@mxrss](https://twitter.com/mxrss)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-108">[Mike Roth](http://www.codeplex.com/site/users/view/mxrss) ([@mxrss](https://twitter.com/mxrss))</span></span>
    - <span data-ttu-id="5e03b-109">列出包时显示许可证 url，详细信息详细说明。</span><span class="sxs-lookup"><span data-stu-id="5e03b-109">Show License url when listing packages and verbosity is detailed.</span></span>
2. <span data-ttu-id="5e03b-110">[Adam Ralph](http://www.codeplex.com/site/users/view/adamralph) ([@adamralph](https://twitter.com/adamralph)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-110">[Adam Ralph](http://www.codeplex.com/site/users/view/adamralph) ([@adamralph](https://twitter.com/adamralph))</span></span>
    - <span data-ttu-id="5e03b-111">[#1956](http://nuget.codeplex.com/workitem/1956) -将 developmentDependency 属性添加到 `packages.config` 中，并将其用于 pack 命令中，以仅包含运行时包</span><span class="sxs-lookup"><span data-stu-id="5e03b-111">[#1956](http://nuget.codeplex.com/workitem/1956) - Add developmentDependency attribute to `packages.config` and use it in pack command to only include runtime packages</span></span>
3. <span data-ttu-id="5e03b-112">[Rafael Nicoletti](http://www.codeplex.com/site/users/view/tkrafael) ([@tkrafael](https://twitter.com/tkrafael)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-112">[Rafael Nicoletti](http://www.codeplex.com/site/users/view/tkrafael) ([@tkrafael](https://twitter.com/tkrafael))</span></span>
    - <span data-ttu-id="5e03b-113">避免 nuget.exe pack 命令中出现重复的属性键。</span><span class="sxs-lookup"><span data-stu-id="5e03b-113">Avoid duplicate Properties key in nuget.exe pack command.</span></span>
4. <span data-ttu-id="5e03b-114">[Ben Phegan](http://www.codeplex.com/site/users/view/benphegan) ([@BenPhegan](https://twitter.com/benphegan)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-114">[Ben Phegan](http://www.codeplex.com/site/users/view/benphegan) ([@BenPhegan](https://twitter.com/benphegan))</span></span>
    - <span data-ttu-id="5e03b-115">[#2610](http://nuget.codeplex.com/workitem/2610) -将计算机缓存大小增加到200。</span><span class="sxs-lookup"><span data-stu-id="5e03b-115">[#2610](http://nuget.codeplex.com/workitem/2610) - Increase machine cache size to 200.</span></span>
5. <span data-ttu-id="5e03b-116">[Slava Trenogin](http://www.codeplex.com/site/users/view/derigel) ([@derigel](https://twitter.com/derigel)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-116">[Slava Trenogin](http://www.codeplex.com/site/users/view/derigel) ([@derigel](https://twitter.com/derigel))</span></span>
    - <span data-ttu-id="5e03b-117">[#3217](http://nuget.codeplex.com/workitem/3217) -修复在错误的选项卡中显示更新的 NuGet 对话框</span><span class="sxs-lookup"><span data-stu-id="5e03b-117">[#3217](http://nuget.codeplex.com/workitem/3217) - Fix NuGet dialog showing updates in the wrong tab</span></span>
    - <span data-ttu-id="5e03b-118">修复项目。在 ProjectManager 中，TargetFramework 可以为 null</span><span class="sxs-lookup"><span data-stu-id="5e03b-118">Fix Project.TargetFramework can be null in ProjectManager</span></span>
    - <span data-ttu-id="5e03b-119">[#3248](http://nuget.codeplex.com/workitem/3248) 修复了不存在的 packageId 上的 SharedPackageRepository FindPackage/FindPackagesById 将失败</span><span class="sxs-lookup"><span data-stu-id="5e03b-119">[#3248](http://nuget.codeplex.com/workitem/3248) - Fix SharedPackageRepository FindPackage/FindPackagesById will fail on non-existent packageId</span></span>
6. <span data-ttu-id="5e03b-120">[古柯 Boyle](http://www.codeplex.com/site/users/view/KevinBoyleRG) ([@kevfromireland](https://twitter.com/kevfromireland)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-120">[Kevin Boyle](http://www.codeplex.com/site/users/view/KevinBoyleRG) ([@kevfromireland](https://twitter.com/kevfromireland))</span></span>
    - <span data-ttu-id="5e03b-121">[#3234](http://nuget.codeplex.com/workitem/3234) -启用对 Nomad 项目的支持</span><span class="sxs-lookup"><span data-stu-id="5e03b-121">[#3234](http://nuget.codeplex.com/workitem/3234) - Enable support for Nomad project</span></span>
7. <span data-ttu-id="5e03b-122">[Corin Blaikie](http://www.codeplex.com/site/users/view/corinblaikie) ([@corinblaikie](https://twitter.com/corinblaikie)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-122">[Corin Blaikie](http://www.codeplex.com/site/users/view/corinblaikie) ([@corinblaikie](https://twitter.com/corinblaikie))</span></span>
    - <span data-ttu-id="5e03b-123">在文件不存在时， [#3252](http://nuget.codeplex.com/workitem/3252)修复推送命令失败，退出代码为0。</span><span class="sxs-lookup"><span data-stu-id="5e03b-123">[#3252](http://nuget.codeplex.com/workitem/3252) - Fix push command fails with exit code 0 when file doesn't exist.</span></span>
8. [<span data-ttu-id="5e03b-124">圣马丁 Veselý</span><span class="sxs-lookup"><span data-stu-id="5e03b-124">Martin Veselý</span></span>](http://www.codeplex.com/site/users/view/veselkamartin)
    - <span data-ttu-id="5e03b-125">[#3226](http://nuget.codeplex.com/workitem/3226) -在项目引用数据库项目时使用 Add-BindingRedirect 命令修复 bug。</span><span class="sxs-lookup"><span data-stu-id="5e03b-125">[#3226](http://nuget.codeplex.com/workitem/3226) - Fix bug with Add-BindingRedirect command when a project references a database project.</span></span>
9. <span data-ttu-id="5e03b-126">[Miroslav Bajtos](http://www.codeplex.com/site/users/view/miroslavbajtos) ([@bajtos](https://twitter.com/bajtos)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-126">[Miroslav Bajtos](http://www.codeplex.com/site/users/view/miroslavbajtos) ([@bajtos](https://twitter.com/bajtos))</span></span>
    - <span data-ttu-id="5e03b-127">[#2891](http://nuget.codeplex.com/workitem/2891) -修复 nuget 的 bug。不正确地对 "exclude" 特性中的通配符进行分析。</span><span class="sxs-lookup"><span data-stu-id="5e03b-127">[#2891](http://nuget.codeplex.com/workitem/2891) - Fix bug of nuget.pack parsing wildcard in the 'exclude' attribute incorrectly.</span></span>
10. <span data-ttu-id="5e03b-128">[Justin Dearing](http://www.codeplex.com/site/users/view/zippy1981) ([@zippy1981](https://twitter.com/zippy1981)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-128">[Justin Dearing](http://www.codeplex.com/site/users/view/zippy1981) ([@zippy1981](https://twitter.com/zippy1981))</span></span>
     - <span data-ttu-id="5e03b-129">[#3307](http://nuget.codeplex.com/workitem/3307) 修复 bug `NuGet.targets` 在还原包时，不会将 $ (平台) 传递到 nuget.exe。</span><span class="sxs-lookup"><span data-stu-id="5e03b-129">[#3307](http://nuget.codeplex.com/workitem/3307) - Fix bug `NuGet.targets` does not pass $(Platform) to nuget.exe when restoring packages.</span></span>
11. [<span data-ttu-id="5e03b-130">Brian Federici</span><span class="sxs-lookup"><span data-stu-id="5e03b-130">Brian Federici</span></span>](http://www.codeplex.com/site/users/view/benerdin)
     - <span data-ttu-id="5e03b-131">[#3294](http://nuget.codeplex.com/workitem/3294) 修复 nuget.exe 包命令中的 bug，该命令允许添加名称相同但大小写不同的文件，最终导致 "项已存在" 异常。</span><span class="sxs-lookup"><span data-stu-id="5e03b-131">[#3294](http://nuget.codeplex.com/workitem/3294) - Fix bug in nuget.exe package command which would allow adding files with the same name but different casing, eventually causing "Item already exists" exception.</span></span>
12. <span data-ttu-id="5e03b-132">[Daniel Cazzulino](http://www.codeplex.com/site/users/view/dcazzulino) ([@kzu](https://twitter.com/kzu)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-132">[Daniel Cazzulino](http://www.codeplex.com/site/users/view/dcazzulino) ([@kzu](https://twitter.com/kzu))</span></span>
     - <span data-ttu-id="5e03b-133">[#2990](http://nuget.codeplex.com/workitem/2990) -将版本属性添加到 NetPortableProfile 类。</span><span class="sxs-lookup"><span data-stu-id="5e03b-133">[#2990](http://nuget.codeplex.com/workitem/2990) - Add Version property to NetPortableProfile class.</span></span>
13. [<span data-ttu-id="5e03b-134">David Simner</span><span class="sxs-lookup"><span data-stu-id="5e03b-134">David Simner</span></span>](https://www.codeplex.com/site/users/view/DavidSimner)
     - <span data-ttu-id="5e03b-135">[#3460](https://nuget.codeplex.com/workitem/3460) -修复 bug NullReferenceException if requireApiKey = true，但标头 X-APIKEY 不存在</span><span class="sxs-lookup"><span data-stu-id="5e03b-135">[#3460](https://nuget.codeplex.com/workitem/3460) - Fix bug NullReferenceException if requireApiKey = true, but the header X-NUGET-APIKEY isn't present</span></span>
14. <span data-ttu-id="5e03b-136">[迈克尔 Friis](https://www.codeplex.com/site/users/view/friism) ([@friism](https://twitter.com/friism)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-136">[Michael Friis](https://www.codeplex.com/site/users/view/friism) ([@friism](https://twitter.com/friism))</span></span>
     - <span data-ttu-id="5e03b-137">[#3278](https://nuget.codeplex.com/workitem/3278) -将 NuGet 版本文件修复为，以使其在 MonoDevelop 上正常工作</span><span class="sxs-lookup"><span data-stu-id="5e03b-137">[#3278](https://nuget.codeplex.com/workitem/3278) - Fixes NuGet.Build targets file to so that it works correctly on MonoDevelop</span></span>
15. <span data-ttu-id="5e03b-138">[Pranav Krishnamoorthy](https://www.codeplex.com/site/users/view/pranavkm) ([@pranav_km](https://twitter.com/pranav_km)) </span><span class="sxs-lookup"><span data-stu-id="5e03b-138">[Pranav Krishnamoorthy](https://www.codeplex.com/site/users/view/pranavkm) ([@pranav_km](https://twitter.com/pranav_km))</span></span>
     - <span data-ttu-id="5e03b-139">通过提高并行度提高还原命令性能</span><span class="sxs-lookup"><span data-stu-id="5e03b-139">Improve Restore command performance by increasing parallelization</span></span>

## <a name="notable-features-in-the-release"></a><span data-ttu-id="5e03b-140">版本中值得注意的功能</span><span class="sxs-lookup"><span data-stu-id="5e03b-140">Notable features in the release</span></span>

### <a name="package-restore-by-default-with-implicit-consent"></a><span data-ttu-id="5e03b-141">默认情况下，包还原 (具有隐式同意) </span><span class="sxs-lookup"><span data-stu-id="5e03b-141">Package Restore by Default (with implicit consent)</span></span>

<span data-ttu-id="5e03b-142">NuGet 2.7 引入了一种新的包还原方法，还克服了重大障碍：默认情况下，包还原许可已启用！</span><span class="sxs-lookup"><span data-stu-id="5e03b-142">NuGet 2.7 introduces a new approach to package restore, and also overcomes a major hurdle: Package restore consent is now on by default!</span></span> <span data-ttu-id="5e03b-143">新方法和隐式许可的组合可大大简化包还原方案。</span><span class="sxs-lookup"><span data-stu-id="5e03b-143">The combination of the new approach and the implicit consent will drastically simplify package restore scenarios.</span></span>

#### <a name="implicit-consent"></a><span data-ttu-id="5e03b-144">隐式同意</span><span class="sxs-lookup"><span data-stu-id="5e03b-144">Implicit Consent</span></span>

<span data-ttu-id="5e03b-145">对于 NuGet 版本2.0、2.1、2.2、2.5 和2.6，用户需要在生成过程中显式允许 NuGet 下载缺少的包。</span><span class="sxs-lookup"><span data-stu-id="5e03b-145">With NuGet versions 2.0, 2.1, 2.2, 2.5, and 2.6, users needed to explicitly allow NuGet to download missing packages during build.</span></span> <span data-ttu-id="5e03b-146">如果未显式指定此许可，则已启用包还原的解决方案在用户授予同意之前无法生成。</span><span class="sxs-lookup"><span data-stu-id="5e03b-146">If this consent had not been explicitly given, then solutions that had enabled package restore would fail to build until the user had granted consent.</span></span>

<span data-ttu-id="5e03b-147">从 NuGet 2.7 开始，默认启用包还原许可，同时允许用户在需要时使用 NuGet 的 "设置" 中的复选框明确 *选择退出* 包还原。</span><span class="sxs-lookup"><span data-stu-id="5e03b-147">Starting with NuGet 2.7, package restore consent is ON by default while allowing users to explicitly *opt out* of package restore if desired, using the checkbox in NuGet's settings in Visual Studio.</span></span> <span data-ttu-id="5e03b-148">此隐式同意更改会影响以下环境中的 NuGet：</span><span class="sxs-lookup"><span data-stu-id="5e03b-148">This change for implicit consent affects NuGet in the following environments:</span></span>

* <span data-ttu-id="5e03b-149">Visual Studio 2013 预览版</span><span class="sxs-lookup"><span data-stu-id="5e03b-149">Visual Studio 2013 Preview</span></span>
* <span data-ttu-id="5e03b-150">Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="5e03b-150">Visual Studio 2012</span></span>
* <span data-ttu-id="5e03b-151">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="5e03b-151">Visual Studio 2010</span></span>
* <span data-ttu-id="5e03b-152">nuget.exe Command-Line 实用工具</span><span class="sxs-lookup"><span data-stu-id="5e03b-152">nuget.exe Command-Line Utility</span></span>

#### <a name="automatic-package-restore-in-visual-studio"></a><span data-ttu-id="5e03b-153">Visual Studio 中的自动包还原</span><span class="sxs-lookup"><span data-stu-id="5e03b-153">Automatic Package Restore in Visual Studio</span></span>

<span data-ttu-id="5e03b-154">从 NuGet 2.7 开始，NuGet 将在 Visual Studio 中生成期间自动下载缺少的包，即使未对该解决方案显式启用包还原也是如此。</span><span class="sxs-lookup"><span data-stu-id="5e03b-154">Starting with NuGet 2.7, NuGet will automatically download missing packages during build in Visual Studio, even if package restore hasn't been explicitly enabled for the solution.</span></span> <span data-ttu-id="5e03b-155">在生成项目或解决方案时，但在调用 MSBuild 之前，将在 Visual Studio 中执行此自动包还原。</span><span class="sxs-lookup"><span data-stu-id="5e03b-155">This Automatic Package Restore happens in Visual Studio when you build a project or the solution, but before MSBuild is invoked.</span></span> <span data-ttu-id="5e03b-156">这产生了几个重要的好处：</span><span class="sxs-lookup"><span data-stu-id="5e03b-156">This yields a few significant benefits:</span></span>

1. <span data-ttu-id="5e03b-157">不再需要在解决方案中使用 "启用 NuGet 包还原" 手势</span><span class="sxs-lookup"><span data-stu-id="5e03b-157">No further need to use the "Enable NuGet Package Restore" gesture on your solution</span></span>
1. <span data-ttu-id="5e03b-158">不需要修改项目，并且 NuGet 不会对项目进行更改，以确保启用包还原</span><span class="sxs-lookup"><span data-stu-id="5e03b-158">Projects don't need to be modified, and NuGet won't make changes to your project to ensure package restore is enabled</span></span>
1. <span data-ttu-id="5e03b-159">所有 NuGet 包（包括包含属性/目标文件的 MSBuild 导入的文件）将在调用 MSBuild *之前* 还原，并确保在生成过程中正确识别这些属性/目标</span><span class="sxs-lookup"><span data-stu-id="5e03b-159">All NuGet packages, including those that included MSBuild imports for props/targets files, will be restored *before* MSBuild is invoked, ensuring those props/targets are properly recognized during the build</span></span>

<span data-ttu-id="5e03b-160">若要在 Visual Studio 中使用自动包还原，只需在) 操作中执行一个 (：</span><span class="sxs-lookup"><span data-stu-id="5e03b-160">In order to use Automatic Package Restore in Visual Studio, you only need to take one (in)action:</span></span>

1. <span data-ttu-id="5e03b-161">不签入您的 `packages` 文件夹</span><span class="sxs-lookup"><span data-stu-id="5e03b-161">Don't check in your `packages` folder</span></span>

<span data-ttu-id="5e03b-162">有多种方法可以 `packages` 从源代码管理中省略文件夹。</span><span class="sxs-lookup"><span data-stu-id="5e03b-162">There are several ways to omit your `packages` folder from source control.</span></span> <span data-ttu-id="5e03b-163">有关详细信息，请参阅 [包和源代码管理](../consume-packages/packages-and-source-control.md) 主题。</span><span class="sxs-lookup"><span data-stu-id="5e03b-163">For more information, see the [Packages and Source Control](../consume-packages/packages-and-source-control.md) topic.</span></span>

<span data-ttu-id="5e03b-164">虽然所有用户都隐式选择自动包还原许可，但你可以轻松地通过 Visual Studio 中的包管理器设置进行选择。</span><span class="sxs-lookup"><span data-stu-id="5e03b-164">While all users are implicitly opted into Automatic Package Restore consent, you can easily opt out through the Package Manager settings in Visual Studio.</span></span>

![程序包管理器设置](./media/NuGet-2.7/package-manager-settings.png)

#### <a name="simplified-package-restore-from-the-command-line"></a><span data-ttu-id="5e03b-166">从 Command-Line 简化包还原</span><span class="sxs-lookup"><span data-stu-id="5e03b-166">Simplified Package Restore from the Command-Line</span></span>

<span data-ttu-id="5e03b-167">NuGet 2.7 为 nuget.exe 引入了一项新功能： `nuget.exe restore`</span><span class="sxs-lookup"><span data-stu-id="5e03b-167">NuGet 2.7 introduces a new feature for nuget.exe: `nuget.exe restore`</span></span>

<span data-ttu-id="5e03b-168">这一新的 "还原" 命令可让你使用单个命令轻松还原解决方案的所有包，方法是接受解决方案文件或文件夹作为参数。</span><span class="sxs-lookup"><span data-stu-id="5e03b-168">This new Restore command allows you to easily restore all packages for a solution with a single command, by accepting a solution file or folder as an argument.</span></span> <span data-ttu-id="5e03b-169">此外，当当前文件夹中只有一个解决方案时，该参数是隐含的。</span><span class="sxs-lookup"><span data-stu-id="5e03b-169">Furthermore, that argument is implied when there's only a single solution in the current folder.</span></span> <span data-ttu-id="5e03b-170">这意味着，以下所有工作都包含单个解决方案文件 (MySolution) ：</span><span class="sxs-lookup"><span data-stu-id="5e03b-170">That means the following all work from a folder that contains a single solution file (MySolution.sln):</span></span>

1. <span data-ttu-id="5e03b-171">nuget.exe restore MySolution</span><span class="sxs-lookup"><span data-stu-id="5e03b-171">nuget.exe restore MySolution.sln</span></span>
1. <span data-ttu-id="5e03b-172">nuget.exe 还原。</span><span class="sxs-lookup"><span data-stu-id="5e03b-172">nuget.exe restore .</span></span>
1. <span data-ttu-id="5e03b-173">nuget.exe 还原</span><span class="sxs-lookup"><span data-stu-id="5e03b-173">nuget.exe restore</span></span>

<span data-ttu-id="5e03b-174">Restore 命令将打开解决方案文件并查找解决方案中的所有项目。</span><span class="sxs-lookup"><span data-stu-id="5e03b-174">The Restore command will open the solution file and find all projects within the solution.</span></span> <span data-ttu-id="5e03b-175">然后，它将查找 `packages.config` 每个项目的文件，并还原找到的所有包。</span><span class="sxs-lookup"><span data-stu-id="5e03b-175">From there, it will find the `packages.config` files for each of the projects and restore all of the packages found.</span></span> <span data-ttu-id="5e03b-176">它还将还原在文件中找到的解决方案级别包 `.nuget\packages.config` 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-176">It also restores solution-level packages found in the `.nuget\packages.config` file.</span></span> <span data-ttu-id="5e03b-177">有关新还原命令的详细信息，请参阅 [命令行参考](../reference/cli-reference/cli-ref-restore.md)。</span><span class="sxs-lookup"><span data-stu-id="5e03b-177">More information about the new Restore command can be found in the [Command-Line Reference](../reference/cli-reference/cli-ref-restore.md).</span></span>

#### <a name="the-new-package-restore-workflow"></a><span data-ttu-id="5e03b-178">新的包还原工作流</span><span class="sxs-lookup"><span data-stu-id="5e03b-178">The New Package Restore Workflow</span></span>

<span data-ttu-id="5e03b-179">我们对包还原进行了这些更改，因为它引入了一个新的工作流。</span><span class="sxs-lookup"><span data-stu-id="5e03b-179">We are excited about these changes to Package Restore, as it introduces a new workflow.</span></span> <span data-ttu-id="5e03b-180">如果要从源代码管理中省略包，只需提交 `packages` 文件夹。</span><span class="sxs-lookup"><span data-stu-id="5e03b-180">If you want to omit your packages from source control you simply don't commit the `packages` folder.</span></span> <span data-ttu-id="5e03b-181">打开并生成解决方案的 Visual Studio 用户将看到包自动还原。</span><span class="sxs-lookup"><span data-stu-id="5e03b-181">Visual Studio users who open and build the solution will see the packages automatically restored.</span></span> <span data-ttu-id="5e03b-182">对于命令行生成，只需 `nuget.exe restore` 在调用之前调用 `msbuild` 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-182">For command-line builds, simply invoke `nuget.exe restore` before invoking `msbuild`.</span></span> <span data-ttu-id="5e03b-183">不再需要记得在解决方案上使用 "启用 NuGet 包还原" 手势，而不再需要修改项目来更改生成。</span><span class="sxs-lookup"><span data-stu-id="5e03b-183">You no longer need to remember to use the "Enable NuGet Package Restore" gesture on your solution, and we'll no longer need to modify your projects to alter the build.</span></span> <span data-ttu-id="5e03b-184">这还为包含 MSBuild 导入的包带来了更好的体验，特别是通过 NuGet 的最新功能添加的导入，可自动导入 \build 文件夹中的 [属性/目标文件](../release-notes/nuget-2.5.md#automatic-import-of-msbuild-targets-and-props-files) 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-184">And this also yields a much improved experience for packages that include MSBuild imports, especially for imports added through NuGet's recent feature for [automatically importing props/targets files](../release-notes/nuget-2.5.md#automatic-import-of-msbuild-targets-and-props-files) from the \build folder.</span></span>

<span data-ttu-id="5e03b-185">除了我们亲自完成的工作外，我们还与一些重要合作伙伴合作，将此新方法舍入。对于其中的任何一种情况，我们都没有具体的时间表，但每个合作伙伴都非常兴奋。</span><span class="sxs-lookup"><span data-stu-id="5e03b-185">In addition to the work we've done ourselves, we're also working with some important partners to round this new approach out. We don't have concrete timelines for any of these yet, but each partner is as excited as we are about the new approach.</span></span>

* <span data-ttu-id="5e03b-186">Team Foundation Service-他们正在努力将对的调用集成到 `nuget.exe restore` 默认生成方案。</span><span class="sxs-lookup"><span data-stu-id="5e03b-186">Team Foundation Service - They are working to integrate the call to `nuget.exe restore` into the default build scenarios.</span></span>
* <span data-ttu-id="5e03b-187">Microsoft Azure 网站-他们正在努力，使你能够将项目推送到 Azure，并在 `nuget.exe restore` 构建你的网站之前调用它。</span><span class="sxs-lookup"><span data-stu-id="5e03b-187">Windows Azure Web Sites - They are working to allow you to push your project to Azure and have `nuget.exe restore` called before your web site is built.</span></span>
* <span data-ttu-id="5e03b-188">TeamCity-他们正在为 TeamCity 3.x 更新 NuGet 安装程序插件</span><span class="sxs-lookup"><span data-stu-id="5e03b-188">TeamCity - They are updating their NuGet Installer plugin for TeamCity 8.x</span></span>
* <span data-ttu-id="5e03b-189">AppHarbor-它们的作用是使你能够将存储库推送到 AppHarbor，并在 `nuget.exe restore` 构建解决方案之前调用它。</span><span class="sxs-lookup"><span data-stu-id="5e03b-189">AppHarbor - They are working to allow you to push your repo to AppHarbor and have `nuget.exe restore` called before your solution is build.</span></span>

<span data-ttu-id="5e03b-190">对于上述每个合作伙伴，他们将使用自己 nuget.exe 的副本，而无需在解决方案中携带 nuget.exe。</span><span class="sxs-lookup"><span data-stu-id="5e03b-190">With each of the partners above, they would use their own copy of nuget.exe and you would not need to carry nuget.exe in your solution.</span></span>

#### <a name="known-issues"></a><span data-ttu-id="5e03b-191">已知问题</span><span class="sxs-lookup"><span data-stu-id="5e03b-191">Known Issues</span></span>

<span data-ttu-id="5e03b-192">在初始2.7 版本中，nuget.exe 还原有两个已知问题，但在9/6/2013 上已修复了该问题，并更新了 [NuGet 命令行包](http://www.nuget.org/packages/NuGet.CommandLine/)。</span><span class="sxs-lookup"><span data-stu-id="5e03b-192">There were two known issues with nuget.exe restore with the initial 2.7 release, but they were fixed on 9/6/2013 with an update to the [NuGet.CommandLine package](http://www.nuget.org/packages/NuGet.CommandLine/).</span></span>  <span data-ttu-id="5e03b-193">CodePlex 上的 [NuGet 2.7 下载页面](https://nuget.codeplex.com/releases/view/107605) 上也提供了此更新。</span><span class="sxs-lookup"><span data-stu-id="5e03b-193">This update is also available on the [NuGet 2.7 download page](https://nuget.codeplex.com/releases/view/107605) on CodePlex.</span></span>  <span data-ttu-id="5e03b-194">运行 `nuget.exe update -self` 将更新到最新版本。</span><span class="sxs-lookup"><span data-stu-id="5e03b-194">Running `nuget.exe update -self` will update to the latest release.</span></span>

<span data-ttu-id="5e03b-195">固定的是：</span><span class="sxs-lookup"><span data-stu-id="5e03b-195">The fixed were:</span></span>

1. [<span data-ttu-id="5e03b-196">使用 SLN 文件时，新包还原不适用于 Mono</span><span class="sxs-lookup"><span data-stu-id="5e03b-196">New package restore doesn't work on Mono when using SLN file</span></span>](https://nuget.codeplex.com/workitem/3596)
1. [<span data-ttu-id="5e03b-197">新包还原不适用于 Wix 项目</span><span class="sxs-lookup"><span data-stu-id="5e03b-197">New package restore doesn't work with Wix projects</span></span>](https://nuget.codeplex.com/workitem/3598)

<span data-ttu-id="5e03b-198">新的包还原工作流也存在一个已知问题，即 [对于解决方案文件夹下的项目，自动包还原不起作用](https://nuget.codeplex.com/workitem/3625)。</span><span class="sxs-lookup"><span data-stu-id="5e03b-198">There is also a known issue with the new package restore workflow whereby [Automatic Package Restore does not work for projects under a solution folder](https://nuget.codeplex.com/workitem/3625).</span></span> <span data-ttu-id="5e03b-199">此问题已在 NuGet 2.7.1 中修复。</span><span class="sxs-lookup"><span data-stu-id="5e03b-199">This issue was fixed in NuGet 2.7.1.</span></span>

### <a name="project-retargeting-and-upgrade-build-errorswarnings"></a><span data-ttu-id="5e03b-200">项目重定目标和升级生成错误/警告</span><span class="sxs-lookup"><span data-stu-id="5e03b-200">Project Retargeting and Upgrade Build Errors/Warnings</span></span>

<span data-ttu-id="5e03b-201">在重定目标或升级项目后多次，你会发现某些 NuGet 包不能正常工作。</span><span class="sxs-lookup"><span data-stu-id="5e03b-201">Many times after retargeting or upgrading your project, you find that some NuGet packages aren't functioning properly.</span></span> <span data-ttu-id="5e03b-202">遗憾的是，没有任何迹象，就如何解决此情况没有任何帮助。</span><span class="sxs-lookup"><span data-stu-id="5e03b-202">Unfortunately, there is no indication of this and then there's no guidance on how to address it.</span></span> <span data-ttu-id="5e03b-203">使用 NuGet 2.7，我们现在使用一些 Visual Studio 事件来识别你的项目重定向或升级的方式，这种方式会影响你安装的 NuGet 包。</span><span class="sxs-lookup"><span data-stu-id="5e03b-203">With NuGet 2.7, we now use some Visual Studio events to recognize when you've retargeted or upgraded your project in a way that affects your installed NuGet packages.</span></span>

<span data-ttu-id="5e03b-204">如果检测到你的任何包受重定目标或升级的影响，我们将生成即时生成错误以通知你。</span><span class="sxs-lookup"><span data-stu-id="5e03b-204">If we detect that any of your packages were affected by the retargeting or upgrade, we'll produce immediate build errors to let you know.</span></span> <span data-ttu-id="5e03b-205">除了立即生成错误外，还 `requireReinstallation="true"` `packages.config` 会在文件中为受重定目标影响的所有包保留一个标志，并且 Visual Studio 中的每个后续生成将引发这些包的生成警告。</span><span class="sxs-lookup"><span data-stu-id="5e03b-205">In addition to the immediate build error, we also persist a `requireReinstallation="true"` flag in your `packages.config` file for all packages that were affected by the retargeting, and each subsequent build in Visual Studio will raise build warnings for those packages.</span></span>

<span data-ttu-id="5e03b-206">尽管 NuGet 不能执行自动操作来重新安装受影响的包，但我们希望这一指示和警告将引导你在需要重新安装包时了解相关信息。</span><span class="sxs-lookup"><span data-stu-id="5e03b-206">Although NuGet cannot take automatic action to reinstall affected packages, we hope this indication and warning will guide help you discover when you need to reinstall packages.</span></span> <span data-ttu-id="5e03b-207">我们还致力于在 [包重新安装指南文档](../consume-packages/reinstalling-and-updating-packages.md) 中，将这些错误消息定向到。</span><span class="sxs-lookup"><span data-stu-id="5e03b-207">We are also working on [package reinstallation guidance documentation](../consume-packages/reinstalling-and-updating-packages.md) that these error messages direct you to.</span></span>

### <a name="nuget-configuration-defaults"></a><span data-ttu-id="5e03b-208">NuGet 配置默认值</span><span class="sxs-lookup"><span data-stu-id="5e03b-208">NuGet Configuration Defaults</span></span>

<span data-ttu-id="5e03b-209">许多公司都在内部使用 NuGet，但我们已在很大时间向开发人员提供了使用内部包源（而不是 nuget.org）的指导。NuGet 2.7 引入了 "配置默认值" 功能，该功能允许为以下项指定计算机范围的默认值：</span><span class="sxs-lookup"><span data-stu-id="5e03b-209">Many companies are using NuGet internally, but have had a hard time guiding their developers to use internal package sources instead of nuget.org. NuGet 2.7 introduces a Configuration Defaults feature that allows machine-wide defaults to be specified for:</span></span>

1. <span data-ttu-id="5e03b-210">启用的包源</span><span class="sxs-lookup"><span data-stu-id="5e03b-210">Enabled package sources</span></span>
1. <span data-ttu-id="5e03b-211">已注册，但已禁用包源</span><span class="sxs-lookup"><span data-stu-id="5e03b-211">Registered, but disabled package sources</span></span>
1. <span data-ttu-id="5e03b-212">默认 nuget.exe 推送源</span><span class="sxs-lookup"><span data-stu-id="5e03b-212">The default nuget.exe push source</span></span>

<span data-ttu-id="5e03b-213">现在，其中的每个可在位于的文件中进行配置 `%ProgramData%\NuGet\NuGetDefaults.Config` 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-213">Each of these can now be configured within a file located at `%ProgramData%\NuGet\NuGetDefaults.Config`.</span></span> <span data-ttu-id="5e03b-214">如果此配置文件指定了包源，则将不会自动注册默认的 nuget.org 包源，而是改为注册中的包源 `NuGetDefaults.Config` 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-214">If this config file specifies package sources, then the default nuget.org package source will not be registered automatically, and the ones in `NuGetDefaults.Config` will be registered instead.</span></span>

<span data-ttu-id="5e03b-215">尽管不需要使用此功能，但我们希望公司 `NuGetDefaults.Config` 使用组策略部署文件。</span><span class="sxs-lookup"><span data-stu-id="5e03b-215">While not required to use this feature, we expect companies to deploy `NuGetDefaults.Config` files using Group Policy.</span></span>

<span data-ttu-id="5e03b-216">*请注意，此功能永远不会导致包源从开发人员的 NuGet 设置中删除。这意味着，如果开发人员已使用 NuGet，并因此注册了 nuget.org 包源，则不会在创建文件后将其删除 `NuGetDefaults.Config` 。*</span><span class="sxs-lookup"><span data-stu-id="5e03b-216">*Note that this feature will never cause a package source to be removed from a developer's NuGet settings. That means if the developer has already used NuGet and therefore has the nuget.org package source registered, it won't be removed after the creation of a `NuGetDefaults.Config` file.*</span></span>

<span data-ttu-id="5e03b-217">有关此功能的详细信息，请参阅 [NuGet 配置默认值](../consume-packages/configuring-nuget-behavior.md#nuget-defaults-file) 。</span><span class="sxs-lookup"><span data-stu-id="5e03b-217">See [NuGet Configuration Defaults](../consume-packages/configuring-nuget-behavior.md#nuget-defaults-file) for more information about this feature.</span></span>

### <a name="renaming-the-default-package-source"></a><span data-ttu-id="5e03b-218">重命名默认包源</span><span class="sxs-lookup"><span data-stu-id="5e03b-218">Renaming the Default Package Source</span></span>

<span data-ttu-id="5e03b-219">NuGet 始终注册一个指向 nuget.org 的默认包源，名为 "NuGet 官方包源"。该名称是详细的，它也不指定实际指向的位置。</span><span class="sxs-lookup"><span data-stu-id="5e03b-219">NuGet has always registered a default package source called "NuGet official package source" that points to nuget.org. That name was verbose and it also didn't specify where it was actually pointing.</span></span> <span data-ttu-id="5e03b-220">若要解决这两个问题，我们已将此包源重命名为 UI 中的 "nuget.org"。</span><span class="sxs-lookup"><span data-stu-id="5e03b-220">To address those two issues, we've renamed this package source to simply "nuget.org" in the UI.</span></span> <span data-ttu-id="5e03b-221">包源的 URL 也已更改为包含 "www"。</span><span class="sxs-lookup"><span data-stu-id="5e03b-221">The URL for the package source was also changed to include the "www."</span></span> <span data-ttu-id="5e03b-222">前缀开头。</span><span class="sxs-lookup"><span data-stu-id="5e03b-222">prefix.</span></span> <span data-ttu-id="5e03b-223">使用 NuGet 2.7 后，现有的 "NuGet 官方包源" 将自动更新为 "nuget.org" 作为其名称，将 " <https://www.nuget.org/api/v2/> " 作为其 URL。</span><span class="sxs-lookup"><span data-stu-id="5e03b-223">After using NuGet 2.7, your existing "NuGet official package source" will automatically be updated to "nuget.org" as its name and "<https://www.nuget.org/api/v2/>" as its URL.</span></span>

### <a name="performance-improvements"></a><span data-ttu-id="5e03b-224">性能改进</span><span class="sxs-lookup"><span data-stu-id="5e03b-224">Performance Improvements</span></span>

<span data-ttu-id="5e03b-225">我们在2.7 中进行了一些性能改进，从而降低了内存占用，减少了磁盘使用量，并加快了包安装。</span><span class="sxs-lookup"><span data-stu-id="5e03b-225">We made some performance improvement in 2.7 which will yield smaller memory footprint, less disk usage and faster package installation.</span></span> <span data-ttu-id="5e03b-226">我们还为基于 OData 的源进行了更智能化的查询，这将减少总体负载。</span><span class="sxs-lookup"><span data-stu-id="5e03b-226">We also made smarter queries to OData-based feeds which will reduce the overall payload.</span></span>

### <a name="new-extensibility-apis"></a><span data-ttu-id="5e03b-227">新的扩展性 Api</span><span class="sxs-lookup"><span data-stu-id="5e03b-227">New Extensibility APIs</span></span>

<span data-ttu-id="5e03b-228">我们向扩展性服务添加了一些新的 Api，以弥补以前版本中缺少的功能的差距。</span><span class="sxs-lookup"><span data-stu-id="5e03b-228">We added some new APIs to our extensibility services to fill the gap of missing functionalities in previous releases.</span></span>

#### <a name="ivspackageinstallerservices"></a><span data-ttu-id="5e03b-229">IVsPackageInstallerServices</span><span class="sxs-lookup"><span data-stu-id="5e03b-229">IVsPackageInstallerServices</span></span>

```cs
// Checks if a NuGet package with the specified Id and version is installed in the specified project.
bool IsPackageInstalledEx(Project project, string id, string versionString);

// Get the list of NuGet packages installed in the specified project.
IEnumerable<IVsPackageMetadata> GetInstalledPackages(Project project);
```

#### <a name="ivspackageinstaller"></a><span data-ttu-id="5e03b-230">IVsPackageInstaller</span><span class="sxs-lookup"><span data-stu-id="5e03b-230">IVsPackageInstaller</span></span>

```cs
// Installs one or more packages that exist on disk in a folder defined in the registry.
void InstallPackagesFromRegistryRepository(string keyName, bool isPreUnzipped, bool skipAssemblyReferences, Project project, IDictionary<string, string> packageVersions);

// Installs one or more packages that are embedded in a Visual Studio Extension Package.
void InstallPackagesFromVSExtensionRepository(string extensionId, bool isPreUnzipped, bool skipAssemblyReferences, Project project, IDictionary<string, string> packageVersions);
```

### <a name="development-only-dependencies"></a><span data-ttu-id="5e03b-231">Development-Only 依赖关系</span><span class="sxs-lookup"><span data-stu-id="5e03b-231">Development-Only Dependencies</span></span>

<span data-ttu-id="5e03b-232">此功能由 [Adam Ralph](https://twitter.com/adamralph) 提供，它允许包作者声明仅在开发时使用的依赖项，而无需包依赖项。</span><span class="sxs-lookup"><span data-stu-id="5e03b-232">This feature was contributed by [Adam Ralph](https://twitter.com/adamralph) and it allows package authors to declare dependencies that were only used at development time and don't require package dependencies.</span></span> <span data-ttu-id="5e03b-233">通过将 `developmentDependency="true"` 属性添加到中的包 `packages.config` ， `nuget.exe pack` 将不再包含该包作为依赖项。</span><span class="sxs-lookup"><span data-stu-id="5e03b-233">By adding a `developmentDependency="true"` attribute to a package in `packages.config`, `nuget.exe pack` will no longer include that package as a dependency.</span></span>

### <a name="removed-support-for-visual-studio-2010-express-for-windows-phone"></a><span data-ttu-id="5e03b-234">删除了对 Visual Studio 2010 Express for Windows Phone 的支持</span><span class="sxs-lookup"><span data-stu-id="5e03b-234">Removed Support for Visual Studio 2010 Express for Windows Phone</span></span>

<span data-ttu-id="5e03b-235">2.7 中的新包还原模型是通过与主 NuGet VSPackage 不同的新 VSPackage 实现的。</span><span class="sxs-lookup"><span data-stu-id="5e03b-235">The new package restore model in 2.7 is implemented by a new VSPackage which is different from the main NuGet VSPackage.</span></span> <span data-ttu-id="5e03b-236">由于技术问题，在 *Visual studio 2010 Express for Windows Phone* SKU 中，此新的 VSPackage 无法正常工作，因为我们与其他受支持的 Visual studio sku 共享相同的代码库。</span><span class="sxs-lookup"><span data-stu-id="5e03b-236">Due to a technical issue, this new VSPackage doesn't work correctly in the *Visual Studio 2010 Express for Windows Phone* SKU as we share the same code base with other supported Visual Studio SKUs.</span></span> <span data-ttu-id="5e03b-237">因此，从 NuGet 2.7 开始，我们将从已发布的扩展中删除对 *Visual Studio 2010 Express for Windows Phone* 的支持。</span><span class="sxs-lookup"><span data-stu-id="5e03b-237">Therefore, starting with NuGet 2.7, we are dropping support for *Visual Studio 2010 Express for Windows Phone* from the published extension.</span></span> <span data-ttu-id="5e03b-238">支持 *Visual studio 2010 Express For Web* 仍包含在发布到 Visual Studio 扩展库的主扩展中。</span><span class="sxs-lookup"><span data-stu-id="5e03b-238">Support for *Visual Studio 2010 Express for Web* is still included in the primary extension published to the Visual Studio Extension Gallery.</span></span>

<span data-ttu-id="5e03b-239">由于我们不确定开发人员在该版本的 Visual Studio 中仍使用 NuGet 的多少开发人员，我们将专门为这些用户发布单独的 Visual Studio 扩展，并将其发布到 CodePlex (而不是) 的 Visual Studio 扩展库。</span><span class="sxs-lookup"><span data-stu-id="5e03b-239">Since we are unsure how many developers are still using NuGet in that version/edition of Visual Studio, we are publishing a separate Visual Studio extension specifically for those users and publishing it on CodePlex (rather than the Visual Studio Extension Gallery).</span></span> <span data-ttu-id="5e03b-240">我们不打算继续维护该扩展，但如果这样会影响你，请在 CodePlex 上存档问题，告诉我们。</span><span class="sxs-lookup"><span data-stu-id="5e03b-240">We don't plan to continue to maintain that extension, but if this affects you please let us know by filing an issue on CodePlex.</span></span>

<span data-ttu-id="5e03b-241">若要下载适用于 Visual Studio 2010 Express 的 NuGet 包管理器 (Windows Phone) ，请访问 [nuget 2.7 下载](https://nuget.codeplex.com/releases/view/107605) 页。</span><span class="sxs-lookup"><span data-stu-id="5e03b-241">To download the NuGet Package Manager (for Visual Studio 2010 Express for Windows Phone), visit the [NuGet 2.7 Downloads](https://nuget.codeplex.com/releases/view/107605) page.</span></span>

### <a name="bug-fixes"></a><span data-ttu-id="5e03b-242">Bug 修复</span><span class="sxs-lookup"><span data-stu-id="5e03b-242">Bug Fixes</span></span>

<span data-ttu-id="5e03b-243">除了这些功能以外，此版本的 NuGet 还包括许多其他 bug 修复。</span><span class="sxs-lookup"><span data-stu-id="5e03b-243">In addition to these features, this release of NuGet also includes many other bug fixes.</span></span> <span data-ttu-id="5e03b-244">此版本中解决了97的总问题。</span><span class="sxs-lookup"><span data-stu-id="5e03b-244">There were 97 total issues addressed in the release.</span></span> <span data-ttu-id="5e03b-245">有关 NuGet 2.7 中已修复的工作项的完整列表，请查看 [此版本的 NuGet 问题跟踪程序](https://nuget.codeplex.com/workitem/list/advanced?release=NuGet%202.7&status=all)。</span><span class="sxs-lookup"><span data-stu-id="5e03b-245">For a full list of work items fixed in NuGet 2.7, please view the [NuGet Issue Tracker for this release](https://nuget.codeplex.com/workitem/list/advanced?release=NuGet%202.7&status=all).</span></span>
